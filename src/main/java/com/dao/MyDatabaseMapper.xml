<?xml version="1.0" encoding="UTF-8" ?>
<!DOCTYPE mapper PUBLIC "-//mybatis.org//DTD Mapper 3.0//EN" "http://mybatis.org/dtd/mybatis-3-mapper.dtd" >
<mapper namespace="com.dao.MyDatabaseMapper">

    <!--通过user_id查找company_id-->
    <select id="getUserCompanyId" parameterType="java.lang.Integer" resultType="com.bean.MyDatabase">
        SELECT
        company_id,company_name
        FROM enterprise_mydatabase
        <where>
                user_id=#{user_id}
        </where>
    </select>

    <!--通过公司id来获取MyDatabase-->
    <select id="getMyDataByCompanyId" parameterType="java.lang.String" resultType="com.bean.MyDatabase">
        SELECT
        *
        FROM
        enterprise_mydatabase
        <where>
            <if test='#{company_id}!=null and #{company_id}!=" " '>
               company_id = #{company_id}
            </if>
        </where>
    </select>

    <!--更新成长力数据-->
    <update id="updateCZLData" parameterType="com.bean.MyDatabase">
        UPDATE enterprise_mydatabase
        <set>
            <if test='#{main_business_income_2015}!=null and #{main_business_income_2015}!=" "'>
                main_business_income_2015 = #{main_business_income_2015},
            </if>
            <if test='#{main_business_income_2014}!=null and #{main_business_income_2014}!=" "'>
                main_business_income_2014 = #{main_business_income_2014},
            </if>
         </set>
        <where>
            company_id = #{company_id}
        </where>
    </update>

    <!--找到company_id，然后删掉公司数据-->
    <delete id="deleteCompanyInfo" parameterType="java.lang.String">
        DELETE FROM enterprise_mydatabase
        <where>
            <if test='#{company_id}!=null and #{company_id}!=" " '>
                company_id = #{company_id}
            </if>
        </where>
    </delete>
    <!--添加公司数据-->
    <insert id="insertCompanyData" parameterType="com.bean.MyDatabase">
        INSERT INTO enterprise_mydatabase
        (company_id,company_name,user_id,main_business_income_2015,main_business_income_2014)
        VALUES (#{company_id},#{company_name},#{main_business_income_2015},#{main_business_income_2014})
    </insert>
</mapper>
